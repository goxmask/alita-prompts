<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alita AI å¯«çœŸè—å»Š</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #0a0a0a; color: #fff; font-family: 'PingFang TC', sans-serif; overflow-x: hidden; }
        .masonry-grid { display: columns; column-width: 320px; column-gap: 20px; width: 100%; }
        .art-card { break-inside: avoid; margin-bottom: 20px; background: #161616; border: 1px solid #222; border-radius: 16px; overflow: hidden; transition: 0.3s; position: relative; cursor: zoom-in; }
        .art-card:hover { transform: translateY(-5px); border-color: #f97316; box-shadow: 0 10px 30px rgba(249, 115, 22, 0.2); }
        
        /* ä¿®æ­£ Overlay èˆ‡æ»¾å‹•è»¸å•é¡Œ */
        .prompt-overlay { 
            background: rgba(0,0,0,0.85); 
            backdrop-filter: blur(12px); 
            transition: 0.4s ease; 
            opacity: 0; 
            position: absolute; 
            inset: 0; 
            padding: 24px; 
            display: flex; 
            flex-direction: column; 
            /* éå¸¸é‡è¦ï¼šè®“ overlay æ””æˆªæ»‘é¼ äº‹ä»¶ï¼Œé€™æ¨£è£¡é¢çš„æ»¾å‹•æ¢æ‰èƒ½é‹ä½œ */
            pointer-events: none; 
        }
        .art-card:hover .prompt-overlay { 
            opacity: 1; 
            pointer-events: auto; /* hover æ™‚å…è¨±é»æ“Šå’Œæ»¾å‹• */
        }
        
        .btn-copy { background: #f97316; color: #fff; padding: 4px 10px; border-radius: 6px; font-size: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-copy:hover { background: #ea580c; transform: scale(1.05); }
        .model-tag { background: #333; color: #aaa; padding: 2px 8px; border-radius: 4px; font-size: 10px; text-transform: uppercase; border: 1px solid #444; }
        
        /* å…§éƒ¨æ»¾å‹•å€åŸŸå„ªåŒ– */
        .scroll-area { 
            flex: 1; 
            overflow-y: auto; 
            padding-right: 8px; 
            margin-top: 10px;
            /* éš±è—åŸç”Ÿé†œé™‹çš„æ»¾å‹•æ¢ï¼Œä½¿ç”¨è‡ªè¨‚æ¨£å¼ */
            scrollbar-width: thin;
            scrollbar-color: #f97316 transparent;
        }
        .scroll-area::-webkit-scrollbar { width: 4px; }
        .scroll-area::-webkit-scrollbar-track { background: transparent; }
        .scroll-area::-webkit-scrollbar-thumb { background-color: rgba(249, 115, 22, 0.5); border-radius: 10px; }
        
        .sticky-header { 
            position: sticky; 
            top: 0; 
            background: linear-gradient(180deg, rgba(0,0,0,0.95) 60%, rgba(0,0,0,0) 100%);
            z-index: 20; 
            padding: 4px 0 12px 0;
        }
        
        .prompt-text-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 16px;
        }
        
        /* Lightbox æ¨£å¼ */
        #lightbox { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; backdrop-filter: blur(10px); }
        #lightbox-img { max-width: 90%; max-height: 85vh; margin: auto; display: block; border-radius: 8px; box-shadow: 0 0 50px rgba(0,0,0,0.5); }
        .lb-close { position: absolute; top: 20px; right: 30px; font-size: 40px; cursor: pointer; color: #888; transition: 0.2s; }
        .lb-close:hover { color: #fff; transform: scale(1.1); }
        .lb-tools { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); display: flex; gap: 20px; }
        .btn-dl { background: #f97316; color: #fff; padding: 12px 24px; rounded-full; font-weight: 800; cursor: pointer; text-decoration: none; border-radius: 50px; transition: 0.3s; box-shadow: 0 4px 15px rgba(249,115,22,0.3); }
        .btn-dl:hover { background: #ea580c; transform: translateY(-2px); }
    </style>
</head>
<body class="p-4 md:p-8">
    <nav class="flex justify-between items-center mb-12 max-w-7xl mx-auto">
        <div>
            <h1 class="text-3xl font-black italic tracking-tighter text-orange-500">ALITA GALLERY</h1>
            <p class="text-xs text-gray-500">Freeman's AI Masterpieces <br><a href="index.html" class="text-gray-400 hover:text-orange-400 transition" style="text-decoration:none; font-size:11px; margin-top: 4px; display: inline-block;">â† è¿”å›æç¤ºè©ç”¢ç”Ÿå™¨</a></p>
        </div>
        <a href="upload.html" class="bg-white text-black px-6 py-2.5 rounded-full font-bold text-sm hover:bg-orange-500 hover:text-white transition shadow-lg">
            <i class="fas fa-cloud-upload-alt mr-2"></i> ä¸Šå‚³ä½œå“
        </a>
    </nav>

    <div class="masonry-grid max-w-7xl mx-auto" id="gallery-root"></div>

    <!-- Lightbox çµæ§‹ -->
    <div id="lightbox" class="flex flex-col justify-center">
        <span class="lb-close" onclick="closeLightbox()">&times;</span>
        <img id="lightbox-img" src="" alt="">
        <div class="lb-tools">
            <a id="download-link" href="" download class="btn-dl"><i class="fas fa-download mr-2"></i> ä¸‹è¼‰åŸåœ–</a>
        </div>
    </div>

    <script>
        const root = document.getElementById('gallery-root');
        const lightbox = document.getElementById('lightbox');
        const lbImg = document.getElementById('lightbox-img');
        const dlLink = document.getElementById('download-link');

        fetch('data.json')
            .then(res => res.json())
            .then(data => {
                // Reverse data to show newest first if data.json is appended at bottom
                data.reverse().forEach(item => {
                    const zhClean = item.zh.replace(/'/g, "\\'");
                    const enClean = item.en.replace(/'/g, "\\'");
                    
                    // We separate the image click from the overlay scroll/copy area
                    root.innerHTML += `
                        <div class="art-card group">
                            <img src="${item.img}" class="w-full cursor-zoom-in" onclick="openLightbox('${item.img}')">
                            <div class="p-4 flex justify-between items-center bg-[#111]">
                                <span class="model-tag">${item.model}</span>
                                <h3 class="text-sm font-bold text-gray-300 truncate ml-2">${item.title}</h3>
                            </div>
                            <div class="prompt-overlay">
                                <h2 class="text-lg font-bold text-orange-400 mb-2 truncate" style="flex-shrink: 0;" onclick="openLightbox('${item.img}')" style="cursor:zoom-in">${item.title}</h2>
                                <p class="text-[10px] text-gray-400 mb-2" style="flex-shrink: 0;">(Hover å…§å¯ä¸Šä¸‹æ²å‹• / é»æ“Šæ¨™é¡Œæˆ–åœ–ç‰‡æ”¾å¤§)</p>
                                <div class="scroll-area">
                                    <div class="prompt-text-box">
                                        <div class="sticky-header flex justify-between items-center text-[11px] font-bold text-gray-300">
                                            <span>ğŸ‡¹ğŸ‡¼ ç¹ä¸­æç¤ºè©</span>
                                            <span class="btn-copy" onclick="copyText('${zhClean}', this)">COPY</span>
                                        </div>
                                        <p class="text-xs leading-relaxed text-gray-300">${item.zh}</p>
                                    </div>
                                    <div class="prompt-text-box">
                                        <div class="sticky-header flex justify-between items-center text-[11px] font-bold text-gray-300">
                                            <span>ğŸ”¥ EN PROMPT</span>
                                            <span class="btn-copy" onclick="copyText('${enClean}', this)">COPY</span>
                                        </div>
                                        <p class="text-[11px] leading-relaxed text-gray-400 font-mono">${item.en}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
            });

        function openLightbox(src) {
            lbImg.src = src;
            dlLink.href = src;
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden'; 
        }

        function closeLightbox() {
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        function copyText(text, btnElement) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btnElement.innerText;
                const originalBg = btnElement.style.background;
                
                btnElement.innerText = 'OK âœ“';
                btnElement.style.background = '#10b981'; // tailwind emerald-500
                
                setTimeout(() => {
                    btnElement.innerText = originalText;
                    btnElement.style.background = originalBg;
                }, 1500);
            });
        }
    </script>
</body>
</html>
