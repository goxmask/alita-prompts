<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šå‚³ä½œå“ | Alita AI å¯«çœŸé¤¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #050505; color: #fff; font-family: 'PingFang TC', -apple-system, sans-serif; position: relative; }
        
        /* æ‰¿è¥²ä¸»é çš„ç’°å¢ƒå…‰æšˆ */
        .ambient-bg { position: fixed; inset: 0; z-index: -1; overflow: hidden; pointer-events: none; }
        .glow-orb-1 { position: absolute; top: -10%; left: -10%; width: 50vw; height: 50vw; background: radial-gradient(circle, rgba(79, 70, 229, 0.1) 0%, rgba(5, 5, 5, 0) 70%); border-radius: 50%; filter: blur(80px); animation: float 20s ease-in-out infinite alternate; }
        .glow-orb-2 { position: absolute; bottom: -20%; right: -10%; width: 60vw; height: 60vw; background: radial-gradient(circle, rgba(234, 88, 12, 0.08) 0%, rgba(5, 5, 5, 0) 70%); border-radius: 50%; filter: blur(100px); animation: float 25s ease-in-out infinite alternate-reverse; }
        @keyframes float { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(5%, 5%) scale(1.1); } }

        /* ç»ç’ƒæ“¬æ…‹å¡ç‰‡ */
        .glass-card { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 24px; padding: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        
        /* è¡¨å–®å…ƒç´ å„ªåŒ– */
        input, textarea, select { background: rgba(0, 0, 0, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); color: #f8fafc; padding: 14px 16px; border-radius: 12px; width: 100%; font-size: 14px; outline: none; transition: all 0.3s ease; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2); }
        input:focus, textarea:focus, select:focus { border-color: #f97316; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2), 0 0 0 2px rgba(249, 115, 22, 0.15); background: rgba(15, 23, 42, 0.8); }
        
        select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; background-size: 16px; cursor: pointer; }
        select option { background-color: #0f172a; }

        /* æŒ‰éˆ•è¨­è¨ˆ */
        .btn-submit { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); width: 100%; padding: 16px; border-radius: 14px; font-weight: 900; font-size: 16px; letter-spacing: 0.1em; cursor: pointer; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); border: 1px solid rgba(255, 255, 255, 0.1); text-transform: uppercase; }
        .btn-submit:disabled { background: #334155; cursor: not-allowed; opacity: 0.7; transform: none; box-shadow: none; border-color: transparent; color: #94a3b8; }
        .btn-submit:hover:not(:disabled) { transform: translateY(-2px) scale(1.01); box-shadow: 0 15px 30px -5px rgba(249, 115, 22, 0.4); border-color: rgba(255, 255, 255, 0.3); }
        
        /* æ¨™ç±¤è¨­è¨ˆ */
        .section-label { font-size: 11px; font-weight: 800; color: #94a3b8; text-transform: uppercase; margin-bottom: 8px; letter-spacing: 0.15em; display: flex; align-items: center; }
        .hint { color: #f97316; font-size: 12px; margin-top: 16px; text-align: center; font-weight: bold; letter-spacing: 0.05em; }

        /* è‡ªè¨‚ä¸Šå‚³æª”æ¡ˆæŒ‰éˆ• */
        .file-upload-wrapper { position: relative; overflow: hidden; display: inline-block; width: 100%; }
        .file-upload-wrapper input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; height: 100%; width: 100%; }
        .custom-file-upload { background: rgba(249, 115, 22, 0.1); border: 1px dashed rgba(249, 115, 22, 0.3); color: #fbd38d; padding: 14px 16px; border-radius: 12px; text-align: center; transition: 0.3s; font-size: 14px; font-weight: 600; display: flex; justify-content: center; align-items: center; }
        .file-upload-wrapper:hover .custom-file-upload { background: rgba(249, 115, 22, 0.2); border-color: #f97316; }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4 md:p-8">
    <div class="ambient-bg">
        <div class="glow-orb-1"></div>
        <div class="glow-orb-2"></div>
    </div>

    <div class="max-w-xl w-full relative z-10">
        <div class="mb-10 text-center">
            <h1 class="text-4xl md:text-5xl font-black italic text-white mb-3 tracking-tighter" style="text-shadow: 0 0 30px rgba(249,115,22,0.4);">
                PUBLISH <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-red-500">MASTERPIECE</span>
            </h1>
            <p class="text-slate-400 font-bold text-sm tracking-widest">ä¸Šå‚³ä½œå“è‡³ Alita é›²ç«¯å¤§ç™¾ç§‘è—å»Š</p>
        </div>

        <div class="glass-card space-y-6">
            <div>
                <label class="section-label"><i class="fas fa-heading mr-2 text-orange-400"></i> ä½œå“æ¨™é¡Œ</label>
                <input type="text" id="title" placeholder="ä¾‹å¦‚ï¼šåˆå¾Œå··å¼„çš„å¾®å…‰">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="section-label"><i class="fas fa-robot mr-2 text-indigo-400"></i> ä½¿ç”¨çš„ AI æ¨¡å‹</label>
                    <select id="model">
                        <option value="Gemini">Google Gemini</option>
                        <option value="Grok">xAI Grok / Flux</option>
                        <option value="ChatGPT">OpenAI DALL-E 3</option>
                        <option value="Z-image">Z-image / SDXL</option>
                    </select>
                </div>
                <div>
                    <label class="section-label"><i class="fas fa-image mr-2 text-emerald-400"></i> ä¸Šå‚³åœ–ç‰‡æª”</label>
                    <div class="file-upload-wrapper">
                        <div class="custom-file-upload" id="fileNameDisplay">
                            <i class="fas fa-cloud-upload-alt mr-2"></i> é¸æ“‡é«˜ç•«è³ªåœ–ç‰‡
                        </div>
                        <input type="file" id="image" accept="image/*" onchange="updateFileName(this)">
                    </div>
                </div>
            </div>

            <div>
                <label class="section-label"><i class="fas fa-language mr-2 text-blue-400"></i> ç¹é«”ä¸­æ–‡æç¤ºè©</label>
                <textarea id="zh" rows="3" placeholder="æè¿°é€™å¼µåœ–çš„æ„å¢ƒèˆ‡ç´°ç¯€..."></textarea>
            </div>

            <div>
                <label class="section-label"><i class="fas fa-code mr-2 text-red-400"></i> EN PROMPT</label>
                <textarea id="en" rows="3" placeholder="Paste the English prompt here..."></textarea>
            </div>

            <div class="pt-4">
                <button id="submitBtn" onclick="submitToAlita()" class="btn-submit">
                    <i class="fas fa-paper-plane mr-2"></i> ç™¼å¸ƒè‡³è—å»Š
                </button>
                <p id="statusMsg" class="hint opacity-0 transition-opacity duration-300">Alita æ­£åœ¨ç‚ºæ‚¨çš„è—è¡“ä¹‹è·¯ä¿é§•è­·èˆª</p>
            </div>
        </div>

        <div class="mt-8 text-center">
            <a href="gallery.html" class="text-slate-500 hover:text-orange-400 text-sm font-bold tracking-wider transition duration-300">
                <i class="fas fa-arrow-left mr-1"></i> è¿”å›è—å»Š
            </a>
        </div>
    </div>

    <script>
        function updateFileName(input) {
            const display = document.getElementById('fileNameDisplay');
            if (input.files && input.files.length > 0) {
                display.innerHTML = `<i class="fas fa-check-circle mr-2 text-emerald-400"></i> ${input.files[0].name}`;
                display.style.borderColor = '#10b981';
                display.style.color = '#10b981';
                display.style.background = 'rgba(16, 185, 129, 0.1)';
            } else {
                display.innerHTML = `<i class="fas fa-cloud-upload-alt mr-2"></i> é¸æ“‡é«˜ç•«è³ªåœ–ç‰‡`;
                display.style.borderColor = 'rgba(249, 115, 22, 0.3)';
                display.style.color = '#fbd38d';
                display.style.background = 'rgba(249, 115, 22, 0.1)';
            }
        }

        async function submitToAlita() {
            const btn = document.getElementById('submitBtn');
            const msg = document.getElementById('statusMsg');
            const fileInput = document.getElementById('image');
            
            if (fileInput.files.length === 0) { alert('è«‹é¸æ“‡åœ–ç‰‡æª”æ¡ˆï¼'); return; }
            if (!document.getElementById('title').value) { alert('è«‹å¡«å¯«æ¨™é¡Œï¼'); return; }

            const formData = new FormData();
            formData.append('image', fileInput.files[0]);
            formData.append('title', document.getElementById('title').value);
            formData.append('model', document.getElementById('model').value);
            formData.append('zh', document.getElementById('zh').value);
            formData.append('en', document.getElementById('en').value);

            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> åŒæ­¥è‡³é›²ç«¯ä¸­...';
            msg.innerText = "Alita æ­£åœ¨å£“ç¸®åœ–ç‰‡ä¸¦æ¨é€åˆ° GitHub æ°¸ä¹…åŸºåœ°ï¼Œè«‹ç¨å€™...";
            msg.style.opacity = '1';

            try {
                const response = await fetch('https://alita-api.goxmask.dpdns.org/upload', {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(errorText || 'ä¼ºæœå™¨é€šè¨Šç•°å¸¸');
                }

                const result = await response.json();
                if (result.success) {
                    btn.innerHTML = '<i class="fas fa-check mr-2"></i> ç™¼å¸ƒæˆåŠŸ';
                    btn.style.background = '#10b981';
                    btn.style.borderColor = '#10b981';
                    btn.style.color = '#fff';
                    msg.innerText = "ğŸ‰ æ­å–œï¼ä½œå“å·²æˆåŠŸå­˜å…¥æ°¸ä¹…è³‡æ–™åº«ä¸¦ç™¼å¸ƒã€‚";
                    msg.style.color = '#10b981';
                    
                    setTimeout(() => {
                        window.location.href = 'gallery.html';
                    }, 1500);
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                console.error('ç™¼å¸ƒå¤±æ•—:', error);
                alert('é€£ç·šå¤±æ•—ï¼š' + error.message + '\nè«‹ç¢ºèªæ‚¨çš„ EC2 å¾Œå°èˆ‡éš§é“æ˜¯å¦æ­£å¸¸é–‹å•Ÿã€‚');
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i> é‡æ–°ç™¼å¸ƒ';
                msg.innerText = "å‚³è¼¸å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯ç‹€æ…‹å¾Œå†è©¦ä¸€æ¬¡ã€‚";
                msg.style.color = '#ef4444';
            }
        }
    </script>
</body>
</html>
